"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7742],{5680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>d});var a=n(6540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),y=i,d=u["".concat(o,".").concat(y)]||u[y]||g[y]||r;return n?a.createElement(d,l(l({ref:t},c),{},{components:n})):a.createElement(d,l({ref:t},c))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=y;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[u]="string"==typeof e?e:i,l[1]=s;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"},5120:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(8168),i=(n(6540),n(5680));const r={id:"objects",title:"The Object Graph Type",sidebar_label:"Objects",sidebar_position:0},l=void 0,s={unversionedId:"types/objects",id:"types/objects",title:"The Object Graph Type",description:"The OBJECT graph type is one of six fundamental types defined by GraphQL. We can think of a graph query like a tree and if scalar values, such as string and int, are the leafs then objects are the branches.",source:"@site/docs/types/objects.md",sourceDirName:"types",slug:"/types/objects",permalink:"/docs/types/objects",draft:!1,tags:[],version:"current",sidebarPosition:0,frontMatter:{id:"objects",title:"The Object Graph Type",sidebar_label:"Objects",sidebar_position:0},sidebar:"tutorialSidebar",previous:{title:"Batch Operations",permalink:"/docs/controllers/batch-operations"},next:{title:"Input Objects",permalink:"/docs/types/input-objects"}},o={},p=[{value:"Custom Naming",id:"custom-naming",level:2},{value:"Methods as Fields",id:"methods-as-fields",level:2},{value:"Excluding Fields",id:"excluding-fields",level:2},{value:"Excluding A Class",id:"excluding-a-class",level:2},{value:"Forced Class Exclusions",id:"forced-class-exclusions",level:2},{value:"Structs as Objects",id:"structs-as-objects",level:2},{value:"Reuse as Input Objects",id:"reuse-as-input-objects",level:2},{value:"Object Inheritance",id:"object-inheritance",level:2},{value:"Implementing Interfaces",id:"implementing-interfaces",level:2}],c={toc:p};function u(e){let{components:t,...n}=e;return(0,i.yg)("wrapper",(0,a.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"OBJECT")," graph type is one of six fundamental types defined by GraphQL. We can think of a graph query like a tree and if ",(0,i.yg)("a",{parentName:"p",href:"./scalars"},"scalar values"),", such as ",(0,i.yg)("inlineCode",{parentName:"p"},"string")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"int"),", are the leafs then objects are the branches."),(0,i.yg)("p",null,"\u2705 Use a ",(0,i.yg)("inlineCode",{parentName:"p"},"class")," or ",(0,i.yg)("inlineCode",{parentName:"p"},"struct")," to identify an object type in a schema."),(0,i.yg)("p",null,"Here we've defined a ",(0,i.yg)("inlineCode",{parentName:"p"},"Donut")," model class. The runtime will convert it, automatically, into an object graph type. If you're familiar with GraphQL's own type definition language the equivalent expression is shown below."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Donut.cs"',title:'"Donut.cs"'},"public class Donut\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public DonutType Type { get; set; }\n    public decimal Price { get; set; }\n}\n")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="Donut Type Definition"',title:'"Donut',Type:!0,'Definition"':!0},"type Donut {\n  id: Int!\n  name: String\n  type: DonutType!\n  price: Decimal!\n}\n")),(0,i.yg)("p",null,"By Default, object graph types:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Are named the same as the ",(0,i.yg)("inlineCode",{parentName:"li"},"class")," or ",(0,i.yg)("inlineCode",{parentName:"li"},"struct")," name"),(0,i.yg)("li",{parentName:"ul"},"Have all public properties with a ",(0,i.yg)("inlineCode",{parentName:"li"},"get")," statement included as fields",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"The return type of a property must be of an acceptable type or it will be skipped")))),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"You can override the default settings in your ",(0,i.yg)("a",{parentName:"p",href:"/docs/reference/schema-configuration#fielddeclarationrequirements"},"schema configuration")," or by use of the ",(0,i.yg)("a",{parentName:"p",href:"/docs/reference/attributes#graphtype"},"GraphType")," and ",(0,i.yg)("a",{parentName:"p",href:"/docs/reference/attributes#graphfield"},"GraphField")," attributes.")),(0,i.yg)("h2",{id:"custom-naming"},"Custom Naming"),(0,i.yg)("p",null,"Give the object a different name in the graph from that of your C# class with the ",(0,i.yg)("inlineCode",{parentName:"p"},"[GraphType]")," attribute."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Declaring a Custom Type Name"',title:'"Declaring',a:!0,Custom:!0,Type:!0,'Name"':!0},'[GraphType("Doughnut")]\npublic class Donut\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public DonutType Type { get; set; }\n    public decimal Price { get; set; }\n}\n')),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="Donut Type Definition"',title:'"Donut',Type:!0,'Definition"':!0},"type Doughnut {\n  id: Int!\n  name: String\n  type: DonutType!\n  price: Decimal!\n}\n")),(0,i.yg)("h2",{id:"methods-as-fields"},"Methods as Fields"),(0,i.yg)("p",null,"By default, POCO class methods are excluded from being fields on the graph but can be added by tagging the method with ",(0,i.yg)("inlineCode",{parentName:"p"},"[GraphField]"),"."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Including a POCO method as a field"',title:'"Including',a:!0,POCO:!0,method:!0,as:!0,'field"':!0},'public class Donut\n{\n    // highlight-next-line\n    [GraphField("salesTax")]\n    public decimal CalculateSalesTax(decimal taxPercentage)\n    {\n        return this.Price * taxPercentage;\n    }\n\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public DonutType Type { get; set; }\n    public decimal Price { get; set; }\n}\n')),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="Donut Type Definition"',title:'"Donut',Type:!0,'Definition"':!0},"type Donut {\n  // highlight-next-line\n  salesTax (taxPercentage: Decimal!): Decimal!\n  id: Int!\n  name: String\n  type: DonutType!\n  price: Decimal!\n}\n")),(0,i.yg)("p",null,"Just as with ",(0,i.yg)("a",{parentName:"p",href:"../controllers/actions"},"controller actions"),", GraphQL will analyze the signature of the method to determine its return type, expression requirements and input arguments."),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"Methods on POCO classes lack many of the features of controllers such as being able to perform ",(0,i.yg)("a",{parentName:"p",href:"../controllers/model-state"},"model state")," validation or provide access to ",(0,i.yg)("inlineCode",{parentName:"p"},"this.User")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"this.Request"),". ")),(0,i.yg)("h2",{id:"excluding-fields"},"Excluding Fields"),(0,i.yg)("p",null,"To exclude a single property that you don't want to expose to GraphQL add the ",(0,i.yg)("inlineCode",{parentName:"p"},"[GraphSkip]")," attribute to it:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Excluding a property"',title:'"Excluding',a:!0,'property"':!0},"public class Donut\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public DonutType Type { get; set; }\n\n    // highlight-next-line\n    [GraphSkip]\n    public decimal Price { get; set; }\n}\n")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="Donut Type Definition"',title:'"Donut',Type:!0,'Definition"':!0},"type Donut {\n  id: Int!\n  name: String\n  type: DonutType!\n  # price is not included\n}\n")),(0,i.yg)("p",null,"Or force GraphQL to skip all fields except those you explicitly define with a ",(0,i.yg)("inlineCode",{parentName:"p"},"[GraphField]")," attribute:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Require explicit declarations for this type"',title:'"Require',explicit:!0,declarations:!0,for:!0,this:!0,'type"':!0},"// highlight-next-line\n[GraphType(FieldDeclarationRequirements = TemplateDeclarationRequirements.RequireAll)]\npublic class Donut\n{\n    [GraphField]\n    public int Id { get; set; }\n\n    [GraphField]\n    public string Name { get; set; }\n\n    public DonutType Type { get; set; }\n    public decimal Price { get; set; }\n}\n")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="Donut Type Definition"',title:'"Donut',Type:!0,'Definition"':!0},"# only id and name are included\ntype Donut {\n  id: Int!\n  name: String\n}\n")),(0,i.yg)("p",null,"Or set a schema-wide option during startup:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Set Field Declaration Requirements at Startup"',title:'"Set',Field:!0,Declaration:!0,Requirements:!0,at:!0,'Startup"':!0},"services.AddGraphQL(options =>\n  {\n      options.DeclarationOptions.FieldDeclarationRequirements = TemplateDeclarationRequirements.RequireAll;\n  });\n")),(0,i.yg)("p",null,"Your schema will follow a cascading model of inclusion rules in order of increasing priority from ",(0,i.yg)("inlineCode",{parentName:"p"},"schema -> class -> field")," level declarations. This can be useful in multi-schema setups where a class may be shared but you don't want the exposed fields to be different or if there is a secure field that you want to guarantee is not exposed regardless of the schema."),(0,i.yg)("h2",{id:"excluding-a-class"},"Excluding A Class"),(0,i.yg)("p",null,"By Default, GraphQL won't include your class in a schema unless:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Its referenced in a controller OR"),(0,i.yg)("li",{parentName:"ul"},"Referenced by a graph type that is referenced in a controller OR"),(0,i.yg)("li",{parentName:"ul"},"Tagged with ",(0,i.yg)("inlineCode",{parentName:"li"},"[GraphType]"),".")),(0,i.yg)("p",null,"But certian schema configurations can override this behavior and allow GraphQL to greedily include classes that it'll never use. This can expose them in an introspection query unintentionally. You can flag a class such that it skipped unless GraphQL can determine that the object is required to fulfill a request to the schema."),(0,i.yg)("p",null,"This is also helpful to prevent objects that are only used as an ",(0,i.yg)("inlineCode",{parentName:"p"},"INPUT_OBJECT")," from being accidentally added as an ",(0,i.yg)("inlineCode",{parentName:"p"},"OBJECT")," and can reduce the clutter in your schema."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Prevent the Type From Being Auto Included"',title:'"Prevent',the:!0,Type:!0,From:!0,Being:!0,Auto:!0,'Included"':!0},"// highlight-next-line\n[GraphType(PreventAutoInclusion = true)]\npublic class Donut\n{\n    [GraphField]\n    public int Id { get; set; }\n\n    [GraphField]\n    public string Name { get; set; }\n\n    public DonutType Type { get; set; }\n    public decimal Price { get; set; }\n}\n")),(0,i.yg)("h2",{id:"forced-class-exclusions"},"Forced Class Exclusions"),(0,i.yg)("p",null,"There are times where preventing auto-inclusion is not enough. Perhaps there is a shared assembly amongst work teams that contains some graph types and some utility classes that absolutely, positively CANNOT be exposed to GraphQL at any cost. Yet those classes are required for the graph types to function."),(0,i.yg)("p",null,"In these cases, add ",(0,i.yg)("inlineCode",{parentName:"p"},"[GraphSkip]")," to the class itself and GraphQL will throw a ",(0,i.yg)("inlineCode",{parentName:"p"},"GraphTypeDeclarationException")," if its ever asked to include the class in a schema. Be that as an explicit reference or through discovery in a controller. This will occur when the schema is first initialized, rendering your application dead. But better a crash when a developer is testing a new change vs. unknowingly leaking sensitive information."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Prevent a Type from EVER Being Included in the Graph"',title:'"Prevent',a:!0,Type:!0,from:!0,EVER:!0,Being:!0,Included:!0,in:!0,the:!0,'Graph"':!0},'// ERROR, GraphTypeDeclarationException will be thrown!\n[GraphSkip]\npublic class SuperSensitiveData\n{\n    public int SecretSaltPhrase => "123456";\n}\n')),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"This rule is enforced at the template level and is applied to the ",(0,i.yg)("inlineCode",{parentName:"p"},"System.Type")," across the board.  Any class, interface, enum etc. with the ",(0,i.yg)("inlineCode",{parentName:"p"},"[GraphSkip]")," attribute will be permanantly skipped.")),(0,i.yg)("h2",{id:"structs-as-objects"},"Structs as Objects"),(0,i.yg)("p",null,"The usage of ",(0,i.yg)("inlineCode",{parentName:"p"},"struct")," types as an ",(0,i.yg)("inlineCode",{parentName:"p"},"OBJECT")," graph type is fully supported. The same rules listed above that apply to ",(0,i.yg)("inlineCode",{parentName:"p"},"class")," types also apply to ",(0,i.yg)("inlineCode",{parentName:"p"},"struct")," types.  The only difference is that since structs are value types there are non-nullable by default. "),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Using a Coffee struct"',title:'"Using',a:!0,Coffee:!0,'struct"':!0},"public class CoffeeController: GraphController\n{\n  [QueryRoot]\n  public Coffee RetrieveCoffee(string flavor){ /*...*/}\n}\n\npublic struct Coffee\n{\n  public string Flavor{ get; set; }\n}\n")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="GraphQL Type Definition"',title:'"GraphQL',Type:!0,'Definition"':!0},"# Coffee must be returned\ntype Query {\n  retrieveCoffee(flavor: String) : Coffee!\n}\n")),(0,i.yg)("p",null,"Use the standard ",(0,i.yg)("inlineCode",{parentName:"p"},"Nullable<T>")," syntax to make them nullable (e.g. ",(0,i.yg)("inlineCode",{parentName:"p"},"Coffee?"),"):"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:"title=\"Using a 'Nullable' Coffee struct\"",title:'"Using',a:!0,"'Nullable'":!0,Coffee:!0,'struct"':!0},"public class CoffeeController: GraphController\n{\n  [QueryRoot]\n  public Coffee? RetrieveCoffee(string flavor){ /*...*/}\n}\n\npublic struct Coffee\n{\n  public string Flavor{ get; set; }\n}\n")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="GraphQL Type Definition"',title:'"GraphQL',Type:!0,'Definition"':!0},"# Coffee or null may be returned\ntype Query {\n  retrieveCoffee(flavor: String) : Coffee\n}\n")),(0,i.yg)("h2",{id:"reuse-as-input-objects"},"Reuse as Input Objects"),(0,i.yg)("p",null,"Both ",(0,i.yg)("inlineCode",{parentName:"p"},"class")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"struct")," types can be used as an ",(0,i.yg)("inlineCode",{parentName:"p"},"INPUT_OBJECT")," and an ",(0,i.yg)("inlineCode",{parentName:"p"},"OBJECT")," graph type. See the section on ",(0,i.yg)("a",{parentName:"p",href:"./input-objects"},"input objects")," for some of the key differences and requirements."),(0,i.yg)("h2",{id:"object-inheritance"},"Object Inheritance"),(0,i.yg)("p",null,"Class inheritance as we think of it in .NET is not concept in GraphQL.  As a result, there is no association between two objects in the graph even if they share an inheritance structure in .NET."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="C# Class Inheritance"',title:'"C#',Class:!0,'Inheritance"':!0},"public class Pastry\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n}\n\npublic class Donut : Pastry\n{\n    string Flavor{ get; set; }\n}\n")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="GraphQL Type Definitions"',title:'"GraphQL',Type:!0,'Definitions"':!0},"# Pastry and Donut have similar fields \n# but are NOT related in the Graph\ntype Pastry {  \n  id: Int!\n  name: String\n}\n\ntype Donut {  \n  id: Int!\n  name: String\n  flavor: String\n}\n")),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"GraphQL ASP.NET is smart enough to figure out your intent with object use (i.e. ",(0,i.yg)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Liskov_substitution_principle"},"Liskov Subsitutions"),"). If you return a ",(0,i.yg)("inlineCode",{parentName:"p"},"Donut")," where a ",(0,i.yg)("inlineCode",{parentName:"p"},"Pastry")," is indicated by the graph. The library will happily use your donut as a pastry for any field resolutions.")),(0,i.yg)("h2",{id:"implementing-interfaces"},"Implementing Interfaces"),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"Read the section on ",(0,i.yg)("a",{parentName:"p",href:"/docs/types/interfaces"},"interfaces")," for details on how to use them.")),(0,i.yg)("p",null,'Graphql will not attempt to "auto include" the interfaces implemented by your objects in your schema. This is both a security measure to prevent information from leaking as well as a decluttering technique. Its unlikely that your schema cares about the myriad of interfaces you may declare on your business objects. '),(0,i.yg)("p",null,"However, when an interface is included in schema, graphql will sense the inclusion and automatically wire up the necessary information on your objects that implement."),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Including a Pastry"',title:'"Including',a:!0,'Pastry"':!0},'public class PastryController: GraphController\n{\n  [QueryRoot("retrievePastry", typeof(Donut))]\n  public IPastry RetrievePastry(string id){/* ... */}\n}\n')),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-graphql",metastring:'title="GraphQL Type Definition"',title:'"GraphQL',Type:!0,'Definition"':!0},"interface IPastry {\n  id: String!\n  name: String\n}\n\n# donut will automatically declare that it implements IPastry when its \n# included in the schema\n// highlight-next-line\ntype Donut implements IPastry {\n    id: String!\n    name: String\n    flavor: DonutFlavor\n}\n")))}u.isMDXComponent=!0}}]);