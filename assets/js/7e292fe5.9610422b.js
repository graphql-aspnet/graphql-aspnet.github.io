"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5762],{4209:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"advanced/input-unions","title":"Input Unions","description":"Input unions (Spec \xa7 3.10.1) are a variant on standard input objects such that only one of the defined fields may be used in a query. This can be helpful if you have an input object, such as search parameters, that gives multiple ways to search, but you want the user submitting a query to choose exactly one option to search by.","source":"@site/docs/advanced/input-unions.md","sourceDirName":"advanced","slug":"/advanced/input-unions","permalink":"/docs/advanced/input-unions","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"input-unions","title":"Input Unions","sidebar_label":"Input Unions","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Directives","permalink":"/docs/advanced/directives"},"next":{"title":"Custom Scalars","permalink":"/docs/advanced/custom-scalars"}}');var i=a(4848),s=a(8453);const r={id:"input-unions",title:"Input Unions",sidebar_label:"Input Unions",sidebar_position:3},l=void 0,o={},u=[{value:"Creating An Input Union",id:"creating-an-input-union",level:2},{value:"Using Attribution",id:"using-attribution",level:3},{value:"Inherit from GraphInputUnion",id:"inherit-from-graphinputunion",level:3},{value:"Nullable Fields",id:"nullable-fields",level:2},{value:"Using <code>GraphInputUnion</code>",id:"using-graphinputunion",level:2},{value:"Support",id:"support",level:2}];function c(n){const e={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.p,{children:["Input unions (Spec \xa7 ",(0,i.jsx)(e.a,{href:"https://spec.graphql.org/September2025/#sec-OneOf-Input-Objects",children:"3.10.1"}),") are a variant on standard input objects such that only one of the defined fields may be used in a query. This can be helpful if you have an input object, such as search parameters, that gives multiple ways to search, but you want the user submitting a query to choose exactly one option to search by."]}),"\n",(0,i.jsxs)(e.p,{children:["By definition an input union is a standard ",(0,i.jsx)(e.a,{href:"/docs/types/input-objects",children:"input object"})," (a class or a struct), all rules of standard input objects apply (i.e. field names must be unique, no use of interfaces etc.).  However..."]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Input unions:"}),(0,i.jsx)("br",{}),"\n\u2705 MUST have no default values declared on any field.",(0,i.jsx)("br",{}),"\n\u2705 MUST have all nullable fields"]}),"\n",(0,i.jsx)(e.admonition,{type:"warning",children:(0,i.jsx)(e.p,{children:"A declaration exception will be thrown and the server will fail to start if either of these rules are violated for any declared input union."})}),"\n",(0,i.jsx)(e.h2,{id:"creating-an-input-union",children:"Creating An Input Union"}),"\n",(0,i.jsx)(e.p,{children:"An object can be declared as an input union in multiple ways:"}),"\n",(0,i.jsx)(e.h3,{id:"using-attribution",children:"Using Attribution"}),"\n",(0,i.jsxs)(e.p,{children:["Use the ",(0,i.jsx)(e.code,{children:"[OneOf]"})," attribute to mark an object as ALWAYS being an input union. Any place the class or struct is referenced as an input to a method it will be handled as an input union."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",metastring:'title="Declaring an input union with the [OneOf] attribute"',children:'// highlight-next-line\n[OneOf]\n[GraphType(InputName = "SearchOptions")]\npublic class SearchDonutParams\n{\n   public string Name {get; set;}\n   public Flavor? Flavor {get; set; } // assume flavor is an enum\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",metastring:'title="Using an Input Union in a Controller"',children:'public class BakeryController : GraphController\n{\n     [QueryRoot("findDonuts")]     \n     // highlight-next-line\n     public List<Donut> FindDonuts(SearchDonutParams search)\n     {\n        /// guaranteed that only one value (name or flavor) is non-null\n        return [];\n     }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",metastring:'title="Equivilant schema type definition"',children:"## relevant graphql type generated\ninput SearchOptions @oneOf {\n  name: String\n  flavor: Flavor\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"inherit-from-graphinputunion",children:"Inherit from GraphInputUnion"}),"\n",(0,i.jsxs)(e.p,{children:["Creating a class that inherits from ",(0,i.jsx)(e.code,{children:"GraphInputUnion"})," works in the same way as using ",(0,i.jsx)(e.code,{children:"[OneOf]"})," but adds some additional quality of life features in terms of metadata and default value handling."]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsxs)(e.em,{children:["See below for details on using ",(0,i.jsx)(e.code,{children:"GraphInputUnion"})]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",metastring:'title="Inheriting from GraphInputUnion"',children:'[GraphType(InputName  "SearchParams")]\n// highlight-next-line\npublic class SearchDonutParams : GraphInputUnion\n{\n   public string Name {get; set;}\n   public Flavor? Flavor {get; set; } // assume flavor is an enum\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",metastring:'title="Using an Input Union in a Controller"',children:'public class BakeryController : GraphController\n{\n     [QueryRoot("findDonuts")]     \n     // highlight-next-line\n     public List<Donut> FindDonuts(SearchDonutParams search)\n     {\n        /// guaranteed that only one value (name or flavor) is non-null\n        return [];\n     }\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",metastring:'title="Equivilant schema type definition"',children:"## relevant graphql type generated\ninput SearchOptions @oneOf {\n  name: String\n  flavor: Flavor\n}\n"})}),"\n",(0,i.jsx)(e.h2,{id:"nullable-fields",children:"Nullable Fields"}),"\n",(0,i.jsxs)(e.p,{children:["The specification defines an input union as ",(0,i.jsx)(e.em,{children:'"a special variant of Input Object where exactly one field must be set and non-null, all others being omitted."'})," (Spec \xa7 ",(0,i.jsx)(e.a,{href:"https://spec.graphql.org/September2025/#sec-OneOf-Input-Objects",children:"3.10.1"}),"). As such, all properties declared on a class or struct that is being used as an input union must be nullable, the supplied query MUST set exactly one field to a non-null value on a query document."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",metastring:'title="Example Scenarios"',children:'\n// \ud83e\udde8 FAIL: Flavor is non-nullable. A graph declaration exception will be thrown at start up.\n[OneOf]\npublic class SearchDonutParams\n{\n   public string Name {get; set;}\n   public Flavor Flavor {get; set; } // assume flavor is an enum\n}\n\n// \ud83e\udde8 FAIL: Name declares a default value.  A graph declaration exception will be thrown at start up.\n[OneOf]\npublic class SearchDonutParams\n{\n  public SearchDonutParams\n  {\n    this.Name = "%";\n  }\n\n   public string Name {get; set;}\n   public Flavor? Flavor {get; set; } // assume flavor is an enum\n}\n\n// \u2705 SUCCESS\n[OneOf]\npublic class SearchDonutParams\n{\n   public string Name {get; set;}\n   public Flavor? Flavor {get; set; }\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"using-graphinputunion",children:["Using ",(0,i.jsx)(e.code,{children:"GraphInputUnion"})]}),"\n",(0,i.jsx)(e.p,{children:"This special base type can be used to expose some additional, quality of life methods for dealing with nullability and default values."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-csharp",children:'public abstract class GraphInputUnion\n{\n   // Will return the value, if it was supplied on the query, otherwise fallbackValue.\n   // this method is is heavily optimized to be performant at runtime\n   public TReturn ValueOrDefault<TValue, TReturn>(Expression<Func<TObject, TValue>> selector, TReturn fallbackValue = default);\n}\n\n[GraphType(InputName = "SearchParams")]\npublic class SearchDonutParams : GraphInputUnion\n{\n   public string Name {get; set;}\n\n   public Flavor? Flavor {get; set; } // assume flavor is an enum\n}\n\n\n// Sample Usage\npublic class BakeryController : GraphController\n{\n     [QueryRoot("findDonuts")]\n     public List<Donut> FindDonuts(SearchDonutParams search)\n     {        \n        InternalSearchParams internalParams = new();\n        internalParams.Name = search.ValueOrDefault(x => x.Name, "%");\n        internalParams.Flavor = search.ValueOrDefault(x => x.Flavor, Flavor.All);\n        return  _service.SearchDonuts(internalParams);\n     }\n}\n'})}),"\n",(0,i.jsx)(e.admonition,{type:"info",children:(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"ValueOrDefault()"})," method will return a type of the fallback value, NOT of the input object property. This allows you to return non-null defaults in place of nullable values that must be passed on the input object. This should greatly reduce bloat in transferring query supplied values and reasonable fallbacks when necessary. When returning non-reference types, they must have compatibility between the nullable and non-nullable versions (e.g. ",(0,i.jsx)(e.code,{children:"int"})," and ",(0,i.jsx)(e.code,{children:"int?"}),")"]})}),"\n",(0,i.jsx)(e.h2,{id:"support",children:"Support"}),"\n",(0,i.jsxs)(e.p,{children:["Input Unions are supported in ",(0,i.jsx)(e.em,{children:"GraphQL ASP.NET version 1.6"})," or later"]})]})}function p(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>r,x:()=>l});var t=a(6540);const i={},s=t.createContext(i);function r(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);